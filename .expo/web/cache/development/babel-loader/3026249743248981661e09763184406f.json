{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive - University of Johannesburg\\\\Documents\\\\GitHub\\\\saoso\\\\node_modules\\\\react-native-gifted-chat\\\\lib\\\\MessageContainer.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport LoadEarlier from \"./LoadEarlier\";\nimport Message from \"./Message\";\nimport Color from \"./Color\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  containerAlignTop: {\n    flexDirection: 'row',\n    alignItems: 'flex-start'\n  },\n  contentContainerStyle: {\n    justifyContent: 'flex-end'\n  },\n  headerWrapper: {\n    flex: 1\n  },\n  listStyle: {\n    flex: 1\n  },\n  scrollToBottomStyle: {\n    opacity: 0.8,\n    position: 'absolute',\n    paddingHorizontal: 15,\n    paddingVertical: 8,\n    right: 10,\n    bottom: 30,\n    zIndex: 999,\n    height: 40,\n    width: 40,\n    borderRadius: 20,\n    backgroundColor: Color.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: Color.black,\n    shadowOpacity: 0.5,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    },\n    shadowRadius: 1\n  }\n});\n\nvar MessageContainer = function (_React$PureComponent) {\n  _inherits(MessageContainer, _React$PureComponent);\n\n  var _super = _createSuper(MessageContainer);\n\n  function MessageContainer() {\n    var _this;\n\n    _classCallCheck(this, MessageContainer);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      showScrollBottom: false\n    };\n    _this.flatListRef = undefined;\n\n    _this.attachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n\n      if (invertibleProps) {\n        Keyboard.addListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n        Keyboard.addListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n        Keyboard.addListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n        Keyboard.addListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n      }\n    };\n\n    _this.detachKeyboardListeners = function () {\n      var invertibleProps = _this.props.invertibleScrollViewProps;\n      Keyboard.removeListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n      Keyboard.removeListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n      Keyboard.removeListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n      Keyboard.removeListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n    };\n\n    _this.renderFooter = function () {\n      if (_this.props.renderFooter) {\n        var footerProps = _extends({}, _this.props);\n\n        return _this.props.renderFooter(footerProps);\n      }\n\n      return null;\n    };\n\n    _this.renderLoadEarlier = function () {\n      if (_this.props.loadEarlier === true) {\n        var loadEarlierProps = _extends({}, _this.props);\n\n        if (_this.props.renderLoadEarlier) {\n          return _this.props.renderLoadEarlier(loadEarlierProps);\n        }\n\n        return React.createElement(LoadEarlier, _extends({}, loadEarlierProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 24\n          }\n        }));\n      }\n\n      return null;\n    };\n\n    _this.scrollToBottom = function () {\n      _this.scrollTo({\n        offset: 0,\n        animated: true\n      });\n    };\n\n    _this.handleOnScroll = function (event) {\n      if (event.nativeEvent.contentOffset.y > _this.props.scrollToBottomOffset) {\n        _this.setState({\n          showScrollBottom: true\n        });\n      } else {\n        _this.setState({\n          showScrollBottom: false\n        });\n      }\n    };\n\n    _this.renderRow = function (_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n\n      if (!item._id && item._id !== 0) {\n        console.warn('GiftedChat: `_id` is missing for message', JSON.stringify(item));\n      }\n\n      if (!item.user) {\n        if (!item.system) {\n          console.warn('GiftedChat: `user` is missing for message', JSON.stringify(item));\n        }\n\n        item.user = {\n          _id: 0\n        };\n      }\n\n      var _a = _this.props,\n          messages = _a.messages,\n          user = _a.user,\n          restProps = __rest(_a, [\"messages\", \"user\"]);\n\n      if (messages && user) {\n        var previousMessage = messages[index + 1] || {};\n        var nextMessage = messages[index - 1] || {};\n\n        var messageProps = _extends({}, restProps, {\n          user: user,\n          key: item._id,\n          currentMessage: item,\n          previousMessage: previousMessage,\n          nextMessage: nextMessage,\n          position: item.user._id === user._id ? 'right' : 'left'\n        });\n\n        if (_this.props.renderMessage) {\n          return _this.props.renderMessage(messageProps);\n        }\n\n        return React.createElement(Message, _extends({}, messageProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 24\n          }\n        }));\n      }\n\n      return null;\n    };\n\n    _this.renderHeaderWrapper = function () {\n      return React.createElement(View, {\n        style: styles.headerWrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 43\n        }\n      }, _this.renderLoadEarlier());\n    };\n\n    _this.keyExtractor = function (item) {\n      return \"\" + item._id;\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.messages && this.props.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.detachKeyboardListeners();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.messages && this.props.messages.length === 0 && nextProps.messages && nextProps.messages.length > 0) {\n        this.detachKeyboardListeners();\n      } else if (this.props.messages && nextProps.messages && this.props.messages.length > 0 && nextProps.messages.length === 0) {\n        this.attachKeyboardListeners();\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(options) {\n      if (this.flatListRef && this.flatListRef.current && options) {\n        this.flatListRef.current.scrollToOffset(options);\n      }\n    }\n  }, {\n    key: \"renderScrollToBottomWrapper\",\n    value: function renderScrollToBottomWrapper() {\n      var scrollToBottomComponent = React.createElement(View, {\n        style: styles.scrollToBottomStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 42\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.scrollToBottom,\n        hitSlop: {\n          top: 5,\n          left: 5,\n          right: 5,\n          bottom: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }, \"V\")));\n\n      if (this.props.scrollToBottomComponent) {\n        return React.createElement(TouchableOpacity, {\n          onPress: this.scrollToBottom,\n          hitSlop: {\n            top: 5,\n            left: 5,\n            right: 5,\n            bottom: 5\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 21\n          }\n        }, this.props.scrollToBottomComponent);\n      }\n\n      return scrollToBottomComponent;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.props.messages || this.props.messages && this.props.messages.length === 0) {\n        return React.createElement(View, {\n          style: styles.container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 20\n          }\n        });\n      }\n\n      return React.createElement(View, {\n        style: this.props.alignTop ? styles.containerAlignTop : styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }\n      }, this.state.showScrollBottom && this.props.scrollToBottom ? this.renderScrollToBottomWrapper() : null, React.createElement(FlatList, _extends({\n        ref: this.flatListRef,\n        extraData: this.props.extraData,\n        keyExtractor: this.keyExtractor,\n        enableEmptySections: true,\n        automaticallyAdjustContentInsets: false,\n        inverted: this.props.inverted,\n        data: this.props.messages,\n        style: styles.listStyle,\n        contentContainerStyle: styles.contentContainerStyle,\n        renderItem: this.renderRow\n      }, this.props.invertibleScrollViewProps, {\n        ListFooterComponent: this.renderHeaderWrapper,\n        ListHeaderComponent: this.renderFooter,\n        onScroll: this.handleOnScroll,\n        scrollEventThrottle: 100\n      }, this.props.listViewProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 9\n        }\n      })));\n    }\n  }]);\n\n  return MessageContainer;\n}(React.PureComponent);\n\nexport { MessageContainer as default };\nMessageContainer.defaultProps = {\n  messages: [],\n  user: {},\n  renderFooter: null,\n  renderMessage: null,\n  onLoadEarlier: function onLoadEarlier() {},\n  inverted: true,\n  loadEarlier: false,\n  listViewProps: {},\n  invertibleScrollViewProps: {},\n  extraData: null,\n  scrollToBottom: false,\n  scrollToBottomOffset: 200,\n  alignTop: false\n};\nMessageContainer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.object),\n  user: PropTypes.object,\n  renderFooter: PropTypes.func,\n  renderMessage: PropTypes.func,\n  renderLoadEarlier: PropTypes.func,\n  onLoadEarlier: PropTypes.func,\n  listViewProps: PropTypes.object,\n  inverted: PropTypes.bool,\n  loadEarlier: PropTypes.bool,\n  invertibleScrollViewProps: PropTypes.object,\n  extraData: PropTypes.object,\n  scrollToBottom: PropTypes.bool,\n  scrollToBottomOffset: PropTypes.number,\n  scrollToBottomComponent: PropTypes.func,\n  alignTop: PropTypes.bool\n};","map":{"version":3,"sources":["../src/MessageContainer.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FlatList, View, StyleSheet, Keyboard, TouchableOpacity, Text, } from 'react-native';\nimport LoadEarlier from './LoadEarlier';\nimport Message from './Message';\nimport Color from './Color';\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n    containerAlignTop: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n    },\n    contentContainerStyle: {\n        justifyContent: 'flex-end',\n    },\n    headerWrapper: {\n        flex: 1,\n    },\n    listStyle: {\n        flex: 1,\n    },\n    scrollToBottomStyle: {\n        opacity: 0.8,\n        position: 'absolute',\n        paddingHorizontal: 15,\n        paddingVertical: 8,\n        right: 10,\n        bottom: 30,\n        zIndex: 999,\n        height: 40,\n        width: 40,\n        borderRadius: 20,\n        backgroundColor: Color.white,\n        alignItems: 'center',\n        justifyContent: 'center',\n        shadowColor: Color.black,\n        shadowOpacity: 0.5,\n        shadowOffset: { width: 0, height: 0 },\n        shadowRadius: 1,\n    },\n});\nexport default class MessageContainer extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            showScrollBottom: false,\n        };\n        this.flatListRef = undefined;\n        this.attachKeyboardListeners = () => {\n            const { invertibleScrollViewProps: invertibleProps } = this.props;\n            if (invertibleProps) {\n                Keyboard.addListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n                Keyboard.addListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n                Keyboard.addListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n                Keyboard.addListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n            }\n        };\n        this.detachKeyboardListeners = () => {\n            const { invertibleScrollViewProps: invertibleProps } = this.props;\n            Keyboard.removeListener('keyboardWillShow', invertibleProps.onKeyboardWillShow);\n            Keyboard.removeListener('keyboardDidShow', invertibleProps.onKeyboardDidShow);\n            Keyboard.removeListener('keyboardWillHide', invertibleProps.onKeyboardWillHide);\n            Keyboard.removeListener('keyboardDidHide', invertibleProps.onKeyboardDidHide);\n        };\n        this.renderFooter = () => {\n            if (this.props.renderFooter) {\n                const footerProps = Object.assign({}, this.props);\n                return this.props.renderFooter(footerProps);\n            }\n            return null;\n        };\n        this.renderLoadEarlier = () => {\n            if (this.props.loadEarlier === true) {\n                const loadEarlierProps = Object.assign({}, this.props);\n                if (this.props.renderLoadEarlier) {\n                    return this.props.renderLoadEarlier(loadEarlierProps);\n                }\n                return <LoadEarlier {...loadEarlierProps}/>;\n            }\n            return null;\n        };\n        this.scrollToBottom = () => {\n            this.scrollTo({ offset: 0, animated: true });\n        };\n        this.handleOnScroll = (event) => {\n            if (event.nativeEvent.contentOffset.y > this.props.scrollToBottomOffset) {\n                this.setState({ showScrollBottom: true });\n            }\n            else {\n                this.setState({ showScrollBottom: false });\n            }\n        };\n        this.renderRow = ({ item, index }) => {\n            if (!item._id && item._id !== 0) {\n                console.warn('GiftedChat: `_id` is missing for message', JSON.stringify(item));\n            }\n            if (!item.user) {\n                if (!item.system) {\n                    console.warn('GiftedChat: `user` is missing for message', JSON.stringify(item));\n                }\n                item.user = { _id: 0 };\n            }\n            const _a = this.props, { messages, user } = _a, restProps = __rest(_a, [\"messages\", \"user\"]);\n            if (messages && user) {\n                const previousMessage = messages[index + 1] || {};\n                const nextMessage = messages[index - 1] || {};\n                const messageProps = Object.assign({}, restProps, { user, key: item._id, currentMessage: item, previousMessage,\n                    nextMessage, position: item.user._id === user._id ? 'right' : 'left' });\n                if (this.props.renderMessage) {\n                    return this.props.renderMessage(messageProps);\n                }\n                return <Message {...messageProps}/>;\n            }\n            return null;\n        };\n        this.renderHeaderWrapper = () => (<View style={styles.headerWrapper}>{this.renderLoadEarlier()}</View>);\n        this.keyExtractor = (item) => `${item._id}`;\n    }\n    componentDidMount() {\n        if (this.props.messages && this.props.messages.length === 0) {\n            this.attachKeyboardListeners();\n        }\n    }\n    componentWillUnmount() {\n        this.detachKeyboardListeners();\n    }\n    componentWillReceiveProps(nextProps) {\n        if (this.props.messages &&\n            this.props.messages.length === 0 &&\n            nextProps.messages &&\n            nextProps.messages.length > 0) {\n            this.detachKeyboardListeners();\n        }\n        else if (this.props.messages &&\n            nextProps.messages &&\n            this.props.messages.length > 0 &&\n            nextProps.messages.length === 0) {\n            this.attachKeyboardListeners();\n        }\n    }\n    scrollTo(options) {\n        if (this.flatListRef && this.flatListRef.current && options) {\n            this.flatListRef.current.scrollToOffset(options);\n        }\n    }\n    renderScrollToBottomWrapper() {\n        const scrollToBottomComponent = (<View style={styles.scrollToBottomStyle}>\n        <TouchableOpacity onPress={this.scrollToBottom} hitSlop={{ top: 5, left: 5, right: 5, bottom: 5 }}>\n          <Text>V</Text>\n        </TouchableOpacity>\n      </View>);\n        if (this.props.scrollToBottomComponent) {\n            return (<TouchableOpacity onPress={this.scrollToBottom} hitSlop={{ top: 5, left: 5, right: 5, bottom: 5 }}>\n          {this.props.scrollToBottomComponent}\n        </TouchableOpacity>);\n        }\n        return scrollToBottomComponent;\n    }\n    render() {\n        if (!this.props.messages ||\n            (this.props.messages && this.props.messages.length === 0)) {\n            return <View style={styles.container}/>;\n        }\n        return (<View style={this.props.alignTop ? styles.containerAlignTop : styles.container}>\n        {this.state.showScrollBottom && this.props.scrollToBottom\n            ? this.renderScrollToBottomWrapper()\n            : null}\n        <FlatList ref={this.flatListRef} extraData={this.props.extraData} keyExtractor={this.keyExtractor} enableEmptySections automaticallyAdjustContentInsets={false} inverted={this.props.inverted} data={this.props.messages} style={styles.listStyle} contentContainerStyle={styles.contentContainerStyle} renderItem={this.renderRow} {...this.props.invertibleScrollViewProps} ListFooterComponent={this.renderHeaderWrapper} ListHeaderComponent={this.renderFooter} onScroll={this.handleOnScroll} scrollEventThrottle={100} {...this.props.listViewProps}/>\n      </View>);\n    }\n}\nMessageContainer.defaultProps = {\n    messages: [],\n    user: {},\n    renderFooter: null,\n    renderMessage: null,\n    onLoadEarlier: () => { },\n    inverted: true,\n    loadEarlier: false,\n    listViewProps: {},\n    invertibleScrollViewProps: {},\n    extraData: null,\n    scrollToBottom: false,\n    scrollToBottomOffset: 200,\n    alignTop: false,\n};\nMessageContainer.propTypes = {\n    messages: PropTypes.arrayOf(PropTypes.object),\n    user: PropTypes.object,\n    renderFooter: PropTypes.func,\n    renderMessage: PropTypes.func,\n    renderLoadEarlier: PropTypes.func,\n    onLoadEarlier: PropTypes.func,\n    listViewProps: PropTypes.object,\n    inverted: PropTypes.bool,\n    loadEarlier: PropTypes.bool,\n    invertibleScrollViewProps: PropTypes.object,\n    extraData: PropTypes.object,\n    scrollToBottom: PropTypes.bool,\n    scrollToBottomOffset: PropTypes.number,\n    scrollToBottomComponent: PropTypes.func,\n    alignTop: PropTypes.bool,\n};\n//# sourceMappingURL=MessageContainer.js.map"]},"metadata":{},"sourceType":"module"}
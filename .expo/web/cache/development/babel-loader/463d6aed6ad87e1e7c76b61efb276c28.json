{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive - University of Johannesburg\\\\Documents\\\\GitHub\\\\saoso\\\\src\\\\screens\\\\Chat\\\\ChatScreen.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { GiftedChat } from \"react-native-gifted-chat\";\nimport React, { Component } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Container, Header, Left, Button, Icon, Title, Right, Body, Content } from \"native-base\";\nimport styles from \"./styles\";\n\nvar ChatScreen = function (_Component) {\n  _inherits(ChatScreen, _Component);\n\n  var _super = _createSuper(ChatScreen);\n\n  function ChatScreen(props) {\n    var _this;\n\n    _classCallCheck(this, ChatScreen);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      messages: [],\n      isLoadingEarlier: false,\n      currentChat: \"\",\n      loadEarlier: true,\n      typingText: \"\",\n      tab: \"chat\"\n    };\n    _this._isMounted = false;\n    _this.onSend = _this.onSend.bind(_assertThisInitialized(_this));\n    _this.onReceive = _this.onReceive.bind(_assertThisInitialized(_this));\n    _this.onLoadEarlier = _this.onLoadEarlier.bind(_assertThisInitialized(_this));\n    _this.renderFooter = _this.renderFooter.bind(_assertThisInitialized(_this));\n    _this._isAlright = null;\n    return _this;\n  }\n\n  _createClass(ChatScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.setState({\n        messages: require(\"./messages\")\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"onLoadEarlier\",\n    value: function onLoadEarlier() {\n      var _this2 = this;\n\n      this.setState(function (previousState) {\n        return {\n          isLoadingEarlier: true\n        };\n      });\n      setTimeout(function () {\n        if (_this2._isMounted === true) {\n          _this2.setState(function (previousState) {\n            return {\n              messages: GiftedChat.prepend(previousState.messages, require(\"./oldmessages\")),\n              loadEarlier: false,\n              isLoadingEarlier: false\n            };\n          });\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"onSend\",\n    value: function onSend() {\n      var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.setState(function (previousState) {\n        return {\n          messages: GiftedChat.append(previousState.messages, messages)\n        };\n      });\n    }\n  }, {\n    key: \"onReceive\",\n    value: function onReceive(text) {\n      this.setState(function (previousState) {\n        return {\n          messages: GiftedChat.append(previousState.messages, {\n            _id: Math.round(Math.random() * 1000000),\n            text: text,\n            createdAt: new Date(),\n            user: {\n              _id: 2,\n              name: \"React Native\"\n            }\n          })\n        };\n      });\n    }\n  }, {\n    key: \"answerDemo\",\n    value: function answerDemo(messages) {\n      var _this3 = this;\n\n      if (messages.length > 0) {\n        if (messages[0].image || messages[0].location || !this._isAlright) {\n          this.setState(function (previousState) {\n            return {\n              typingText: \"React Native is typing\"\n            };\n          });\n        }\n      }\n\n      setTimeout(function () {\n        if (_this3._isMounted === true) {\n          if (messages.length > 0) {\n            if (messages[0].image) {\n              _this3.onReceive(\"Nice picture!\");\n            } else if (messages[0].location) {\n              _this3.onReceive(\"My favorite place\");\n            } else if (!_this3._isAlright) {\n              _this3._isAlright = true;\n\n              _this3.onReceive(\"Alright\");\n            }\n          }\n        }\n\n        _this3.setState(function (previousState) {\n          return {\n            typingText: \"\"\n          };\n        });\n      }, 1000);\n    }\n  }, {\n    key: \"renderFooter\",\n    value: function renderFooter(props) {\n      if (this.state.typingText !== \"\") {\n        return React.createElement(View, {\n          style: styles.chatFooterView,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          style: styles.chatFooterText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }\n        }, this.state.typingText));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var navigation = this.props.navigation;\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 7\n        }\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }, React.createElement(Left, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }\n      }, React.createElement(Button, {\n        transparent: true,\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, React.createElement(Icon, {\n        name: \"arrow-back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }\n      }))), React.createElement(Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, navigation.state.params.name)), React.createElement(Right, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      })), React.createElement(Content, {\n        scrollEnabled: false,\n        extraScrollHeight: -13,\n        contentContainerStyle: styles.contentChatView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }\n      }, React.createElement(GiftedChat, {\n        messages: this.state.messages,\n        onSend: this.onSend,\n        loadEarlier: this.state.loadEarlier,\n        onLoadEarlier: this.onLoadEarlier,\n        isLoadingEarlier: this.state.isLoadingEarlier,\n        renderFooter: this.renderFooter,\n        user: {\n          _id: 1\n        },\n        bottomOffset: 50,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return ChatScreen;\n}(Component);\n\nexport default ChatScreen;","map":{"version":3,"sources":["C:/Users/Dell/OneDrive - University of Johannesburg/Documents/GitHub/saoso/src/screens/Chat/ChatScreen.js"],"names":["GiftedChat","React","Component","Container","Header","Left","Button","Icon","Title","Right","Body","Content","styles","ChatScreen","props","state","messages","isLoadingEarlier","currentChat","loadEarlier","typingText","tab","_isMounted","onSend","bind","onReceive","onLoadEarlier","renderFooter","_isAlright","setState","require","previousState","setTimeout","prepend","append","text","_id","Math","round","random","createdAt","Date","user","name","length","image","location","chatFooterView","chatFooterText","navigation","goBack","params","contentChatView"],"mappings":"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","sourcesContent":["import { GiftedChat } from \"react-native-gifted-chat\";\r\nimport React, { Component } from \"react\";\r\nimport { Text, View } from \"react-native\";\r\nimport {\r\n  Container,\r\n  Header,\r\n  Left,\r\n  Button,\r\n  Icon,\r\n  Title,\r\n  Right,\r\n  Body,\r\n  Content\r\n} from \"native-base\";\r\nimport styles from \"./styles\";\r\n\r\nclass ChatScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messages: [],\r\n      isLoadingEarlier: false,\r\n      currentChat: \"\",\r\n      loadEarlier: true,\r\n      typingText: \"\",\r\n      tab: \"chat\"\r\n    };\r\n    this._isMounted = false;\r\n    this.onSend = this.onSend.bind(this);\r\n    this.onReceive = this.onReceive.bind(this);\r\n    this.onLoadEarlier = this.onLoadEarlier.bind(this);\r\n    this.renderFooter = this.renderFooter.bind(this);\r\n    this._isAlright = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    this.setState({\r\n      messages: require(\"./messages\")\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  onLoadEarlier() {\r\n    this.setState(previousState => ({\r\n      isLoadingEarlier: true\r\n    }));\r\n\r\n    setTimeout(() => {\r\n      if (this._isMounted === true) {\r\n        this.setState(previousState => ({\r\n          messages: GiftedChat.prepend(\r\n            previousState.messages,\r\n            require(\"./oldmessages\")\r\n          ),\r\n          loadEarlier: false,\r\n          isLoadingEarlier: false\r\n        }));\r\n      }\r\n    }, 1000); // simulating network\r\n  }\r\n\r\n  onSend(messages = []) {\r\n    this.setState(previousState => ({\r\n      messages: GiftedChat.append(previousState.messages, messages)\r\n    }));\r\n  }\r\n\r\n  onReceive(text) {\r\n    this.setState(previousState => ({\r\n      messages: GiftedChat.append(previousState.messages, {\r\n        _id: Math.round(Math.random() * 1000000),\r\n        text,\r\n        createdAt: new Date(),\r\n        user: {\r\n          _id: 2,\r\n          name: \"React Native\"\r\n          // avatar: 'https://facebook.github.io/react/img/logo_og.png',\r\n        }\r\n      })\r\n    }));\r\n  }\r\n\r\n  answerDemo(messages) {\r\n    if (messages.length > 0) {\r\n      if (messages[0].image || messages[0].location || !this._isAlright) {\r\n        this.setState(previousState => ({\r\n          typingText: \"React Native is typing\"\r\n        }));\r\n      }\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (this._isMounted === true) {\r\n        if (messages.length > 0) {\r\n          if (messages[0].image) {\r\n            this.onReceive(\"Nice picture!\");\r\n          } else if (messages[0].location) {\r\n            this.onReceive(\"My favorite place\");\r\n          } else if (!this._isAlright) {\r\n            this._isAlright = true;\r\n            this.onReceive(\"Alright\");\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setState(previousState => ({\r\n        typingText: \"\"\r\n      }));\r\n    }, 1000);\r\n  }\r\n\r\n  renderFooter(props) {\r\n    if (this.state.typingText !== \"\") {\r\n      return (\r\n        <View style={styles.chatFooterView}>\r\n          <Text style={styles.chatFooterText}>\r\n            {this.state.typingText}\r\n          </Text>\r\n        </View>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const navigation = this.props.navigation;\r\n    return (\r\n      <Container>\r\n        <Header>\r\n          <Left>\r\n            <Button transparent onPress={() => navigation.goBack()}>\r\n              <Icon name=\"arrow-back\" />\r\n            </Button>\r\n          </Left>\r\n          <Body>\r\n            <Title>\r\n              {navigation.state.params.name}\r\n            </Title>\r\n          </Body>\r\n          <Right />\r\n        </Header>\r\n        <Content\r\n          scrollEnabled={false}\r\n          extraScrollHeight={-13}\r\n          contentContainerStyle={styles.contentChatView}\r\n        >\r\n          <GiftedChat\r\n            messages={this.state.messages}\r\n            onSend={this.onSend}\r\n            loadEarlier={this.state.loadEarlier}\r\n            onLoadEarlier={this.onLoadEarlier}\r\n            isLoadingEarlier={this.state.isLoadingEarlier}\r\n            renderFooter={this.renderFooter}\r\n            user={{\r\n              _id: 1\r\n            }}\r\n            bottomOffset={50}\r\n          />\r\n        </Content>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatScreen;\r\n"]},"metadata":{},"sourceType":"module"}